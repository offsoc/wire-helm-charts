{{/* filepath: /Users/sukanta.ghosh/Workspace/helm-charts/charts/wire-utility/templates/NOTES.txt */}}
ğŸš€ Wire Utility Debug Pod has been deployed successfully!

DEPLOYMENT INFO:
  Release Name: {{ .Release.Name }}
  Namespace: {{ .Release.Namespace }}
  Chart Version: {{ .Chart.Version }}
  App Version: {{ .Chart.AppVersion }}

POD STATUS:
  Check pod status:
    kubectl get pods -l app.kubernetes.io/name={{ include "wire-utility.name" . }} -n {{ .Release.Namespace }}
  
  View startup logs:
    kubectl logs {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -f

ACCESSING THE DEBUG POD:
  ğŸ“‹ Interactive shell:
    kubectl exec -it {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- bash

  ğŸ“Š Quick status check:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- status

CONFIGURED SERVICES:
  ğŸ—„ï¸  MinIO:        {{ include "wire-utility.minioServiceEndpoint" . }}
  ğŸ—ƒï¸  Cassandra:    {{ include "wire-utility.cassandraServiceName" . }}:{{ .Values.cassandra.port }}
  ğŸ° RabbitMQ:     {{ include "wire-utility.rabbitmqServiceName" . }}:{{ .Values.rabbitmq.port }}
  ğŸ” Elasticsearch: {{ include "wire-utility.elasticsearchServiceName" . }}:{{ .Values.elasticsearch.port }}

AVAILABLE TOOLS IN POD:

  ğŸ”§ Service-Specific Tools:
    â€¢ status          - Show service connectivity status
    â€¢ mc              - MinIO client (alias: wire-minio)
    â€¢ cqlsh           - Cassandra CQL shell
    â€¢ rabbitmqadmin   - RabbitMQ management
    â€¢ es-debug.sh     - Elasticsearch debugging tool

  ğŸŒ Network & Connectivity:
    â€¢ curl            - HTTP client and API testing
    â€¢ wget            - File downloader
    â€¢ nc (netcat)     - Network connectivity tester
    â€¢ nslookup        - DNS lookup utility
    â€¢ dig             - DNS lookup tool
    â€¢ ping            - ICMP connectivity test
    â€¢ traceroute      - Network path tracing
    â€¢ tcpdump         - Network packet capture
    â€¢ nmap            - Network port scanner

  ğŸ” Analysis & Debugging:
    â€¢ jq              - JSON processor and formatter
    â€¢ python2/python3 - Python interpreters
    â€¢ pip3            - Python package installer
    â€¢ openssl         - SSL/TLS testing and certificates
    
  ğŸ“ File & System Utils:
    â€¢ tree            - Directory tree viewer
    â€¢ file            - File type identification
    â€¢ less            - File pager
    â€¢ vim/nano        - Text editors
    â€¢ find            - File search utility
    â€¢ grep/awk/sed    - Text processing tools

QUICK COMMANDS:
  ğŸ“ˆ Check all services:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- status

  ğŸ—„ï¸  MinIO operations:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- mc ls wire-minio
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- mc admin info wire-minio

  ğŸ—ƒï¸  Cassandra operations:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- cqlsh
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- cqlsh -e "DESCRIBE KEYSPACES;"

  ğŸ° RabbitMQ operations:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- rabbitmqadmin list queues
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- rabbitmqadmin list exchanges

  ğŸ” Elasticsearch operations:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- es-debug.sh health
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- es-debug.sh indices
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- es-debug.sh usages

NETWORK DEBUGGING EXAMPLES:
  ğŸ” Test connectivity:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- nc -z <host> <port>
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- ping <host>
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- traceroute <host>

  ğŸ” DNS resolution:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- nslookup <service-name>
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- dig <service-name>

  ğŸ” HTTP/API testing:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- curl -v <url>
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- curl -s <api-endpoint> | jq .

  ğŸ” Port scanning:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- nmap -p <port-range> <host>

  ğŸ” SSL/TLS testing:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- openssl s_client -connect <host>:<port>

  ğŸ” Network packet capture:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- tcpdump -i any -n host <host>

TROUBLESHOOTING:
  ğŸ”§ If services show as unreachable:
    1. Verify service names and ports in values/wire-server/values.yaml
    2. Check if target services are running:
       kubectl get pods,svc -n <target-namespace>
    3. Verify network policies allow communication
    4. Check DNS resolution:
       kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- nslookup <service-name>
    5. Test connectivity with different tools:
       kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- ping <service-name>
       kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- nc -z <service-name> <port>

  ğŸ“ View entrypoint script:
    kubectl get configmap {{ include "wire-utility.fullname" . }}-entrypoint -n {{ .Release.Namespace }} -o yaml

  ğŸ”„ Restart the pod:
    kubectl delete pod {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }}

  ğŸ“Š Check pod events:
    kubectl describe pod {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }}

PYTHON SCRIPTING:
  ğŸ Run Python scripts for custom debugging:
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- python3 -c "import requests; print(requests.get('http://service:port').status_code)"
    kubectl exec {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- pip3 install <package>

UPDATING THE DEPLOYMENT:
  ğŸ“¦ Update configuration:
    helm upgrade {{ .Release.Name }} ./charts/wire-utility -f ./values/wire-server/values.yaml -f ./values/wire-server/secrets.yaml

  ğŸ”„ Force pod restart:
    helm upgrade {{ .Release.Name }} ./charts/wire-utility -n {{ .Release.Namespace }} -f ./values/wire-server/values.yaml -f ./values/wire-server/secrets.yaml --force

  ğŸ—‘ï¸  Uninstall:
    helm uninstall {{ .Release.Name }} -n {{ .Release.Namespace }}

AUTO-RESTART BEHAVIOR:
  âœ… Pods automatically restart when:
    â€¢ Entrypoint script changes (checksum/entrypoint)
    â€¢ Image tag/repository changes
    â€¢ Environment variables change
    â€¢ Resource limits change

  âš ï¸  Manual restart needed when:
    â€¢ Service endpoints change (unless additional checksums added)
    â€¢ ConfigMap updated outside of Helm

---
ğŸ’¡ Pro tip: The pod shows service status automatically when you exec into it!
   Just run: kubectl exec -it {{ include "wire-utility.fullname" . }}-0 -n {{ .Release.Namespace }} -- bash

ğŸ“š This pod is a complete network debugging toolkit with service-specific clients,
   network analysis tools, and scriptable Python environment!

ğŸ¯ Happy debugging! ğŸ›